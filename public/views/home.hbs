<html>
  <head>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600;900&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
    <style>
    @keyframes animateSide{
      0%{
        margin-left: -260px;
      }
      100%{
        margin-left: 0px;
      }
    }
    @keyframes animateSideBack{
      0%{
        margin-left: 0;
      }
      100%{
        margin-left: -260px;
      }
    }
    #animate-nav{
      animation: animateSide .5s forwards;
    }
    #animate-nav-def{
      animation: none;
    }
    #unanimate-nav{
      animation: animateSideBack .5s forwards;
    }
    ::-webkit-scrollbar{
      width: 10px;
    }
    ::-webkit-scrollbar-thumb{
      border: 0px solid;
      background-color: #d1d1d1;
    }
    @keyframes grow{
      0%{
        width: 0;
        height: 0;
        top: 30%; 
        right: 0px;
      }
      100%{
        width: calc(100% - 30px);
        top: 15%; 
        right: 15px;
        height: calc(100% - 15vh);
      }
    }
  </style>
  <body style="margin: 0px;">
    <center>
    <div style="width: 100%; height: 55px; background-color: #e60f0f;">
      <div style="width: 90%; height: 55px; position: relative;">
        <img src="hamburger.png" style="width: 40px; position: absolute; left: 0px; top: 10px;" onclick="animateNav('true')">
        <img src="notify.png" onclick="profile()" style="width: 30px; position: absolute; right: 3px; top: 13px;">
        <p id="notifyNum" style="color: white; font-size: 10px; font-family: Montserrat; position: absolute; top: 6px; right: 8px;">0</p>
      </div>
    </div>
    <div style="width: 100%; height: auto;">
    <div style="background-color: e60f0f; width: 100%; height: 20%;"></div>
    <div style="background-color: white; position: absolute; left: 5%; top: 12%; box-shadow: 0 0 10px rgba(0, 0, 0, 0.6); width: 90%; min-height: 20%; border-radius: 7px; color: #e60f0f; padding-top: 50px; font-family: Montserrat; font-size: 1.3em;"><div style="background-image: url(airplaneLogo.png); background-image: cover; background-size: cover; border: 2px solid white; background-repeat:no-repeat; background-position:center center; box-shadow: 0 0 10px rgba(0, 0, 0, 0.6); position: absolute; top: -37.5px; left: calc(50% - 37.5px); background-color: white; width: 75px; height: 75px; border-radius: 75px;"></div>Welcome to Ace Airlines<br></br><b style="color: #e60f0f; font-size: 2em; font-family: Montserrat;">Admin</b></div>

    <div style="position: relative; top: 13vh;">
      <b style="float: left; margin-left: 5%; font-size: 1em; font-family: Montserrat;">See News from Ace Airlines</b>
    <div onclick="window.location = '/news'" style="position: relative; top: 35px; background-color: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.6); width: 90%; min-height: 17%; border-radius: 7px;">
      <img src="note.png" style="position: absolute; top: 10px; left: 10px; width: 20px;">
      <i style="position: absolute; top: 10px; left: 50px; color: #e60f0f; font-family: Montserrat;">Ace News</i>
      <img src="open.png" style="position: absolute; top: 10px; right: 20px; width: 20px;">
      <p style="text-align: left; color: #e60f0f; font-family: Montserrat; font-size: 1.2em; position: absolute; top: 20px; left: 10px; ">Ace Airlines Releases Its new app...</p>
    </div>

    <img src="dotsHome.png" style="position: absolute; top: 25vh; left: calc(50% - 25px); width: 50px;">

    <div onclick="window.location = 'https://flyaceairline.weebly.com/a-program-info.html#app'" id="imageElmt" style="background-image: url(image0.png); background-size: contain; border: 2px solid #e60f0f; background-repeat:no-repeat; background-position: center center; position: relative; top: 13vh; box-shadow: 0 0 10px rgba(0, 0, 0, 0.6); width: 90%; min-height: 17%; border-radius: 7px;">
    </div>
    </div>
   
   <!--bar-->
    <div style="background-color: white; padding-top: 5px; padding-bottom: 5px; width: 100%; position: fixed; bottom: 0px;">
    <img src="house.png" onclick="window.location='/home'" style="margin-left: 20%; float: left; display: inline-block; width: 35px;">
    <div onclick="window.location='/book-a-flight'" style="box-shadow: 0 0 10px rgba(230, 15, 15, 0.6); display: inline-block; width: 40px; height: 40px; border-radius: 5px; color: white; font-size: 35px; font-family: Montserrat; background-color: #e60f0f;">+</div>
    <img src="greyairplane.png" onclick="window.location='/my-flights'" style="margin-right: 20%; float: right; display: inline-block; width: 35px;">
</div>

    </center>
      <!--navigation-->
      <div id="blurid" style="display: none; z-index: 500; position: absolute; top:0px; right: 0px; background-color: transparent; backdrop-filter: brightness(.5); height: 100%; width: 100vw;"></div>
      <div id="unanimate-nav-def" style="z-index: 1000; width: 250px; background-color: #d6d6d6; height: 100vh; position: absolute; top: 0px; left: 0px; box-shadow: 0 0 20px rgba(0, 0, 0, 0.4); margin-left: -260px">
          <img src="backArrowNav.png" style="position: absolute; top: 30px; right: 30px; width: 10px;" onclick="unanimateNav()">
          <img src="acelogo.png" style="width: 120px; margin: 20px;">
          <h1 style="font-size: 170%; color: #e60f0f; margin: 0px; margin-left: 20px; font-family: Montserrat; margin-right: 10px;">Navigation</h1>
          <button style="text-align: left; color: #e60f0f; width: 150px; height: 30px; background-color: transparent; border: none; margin: 0px; margin-top: 25px; margin-left: 20px; border-radius: 4px; font-family: Montserrat;" onclick="window.location='/home'">HOME</button>
          <button style="text-align: left; color: #e60f0f; width: 150px; height: 30px; background-color: transparent; border: none; margin: 0px; margin-top: 10px; margin-left: 20px; border-radius: 4px; font-family: Montserrat;" onclick="window.location = '/news'">NEWS</button>
          <button style="text-align: left; color: #e60f0f; width: 150px; height: 30px; background-color: transparent; border: none; margin: 0px; margin-top: 10px; margin-left: 20px; border-radius: 4px; font-family: Montserrat;" onclick="window.location='/book-a-flight'">BOOK NOW</button>
          <button style="text-align: left; color: #e60f0f; width: 150px; height: 30px; background-color: transparent; border: none; margin: 0px; margin-top: 10px; margin-left: 20px; border-radius: 4px; font-family: Montserrat;" onclick="window.location='/my-flights'">MY FLIGHTS</button>
          <button style="text-align: left; color: #e60f0f; width: 150px; height: 30px; background-color: transparent; border: none; margin: 0px; margin-top: 10px; margin-left: 20px; border-radius: 4px; font-family: Montserrat;" onclick="openWeb()">WEBSITE</button>
          <button style="text-align: left; color: #e60f0f; width: 150px; height: 30px; background-color: transparent; border: none; margin: 0px; margin-top: 10px; margin-left: 20px; border-radius: 4px; font-family: Montserrat;" onclick="window.location='/resource'">RESOURCE</button>
          <button style="text-align: left; color: #e60f0f; width: 150px; height: 30px; background-color: transparent; border: none; margin: 0px; margin-top: 10px; margin-left: 20px; border-radius: 4px; font-family: Montserrat;" onclick="window.location='/help'">HELP</button><!--
          --><button style="position: absolute; margin-left: 18px; bottom: 40px; text-align: left; left: 0px; color: #e60f0f; width: 150px; height: 30px; background-color: transparent; border: none; border-radius: 4px; font-family: Montserrat;" onclick="window.location='/'">Log Out</button>
          <i style="position: absolute; color: #e60f0f; bottom: 20px; left: 20px; font-family: Montserrat; font-size: 12px;">Copyright Ace Airlines‚Ñ¢ 2021</i>
      </div>
    </div>

    <!--Notifications-->
    <div id="profileDiv" style="display: none; width: 100vw; height: 100vh; background-color: rgba(255, 255, 255, 0.9); position: fixed; top: 0px; left: 0px; z-index: 1000;">
      <div style="width: 95%; height: 270px; background-color: white; position: absolute; top: 20px; left: calc(50% - 47.5%); margin-right: -150px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.4); border-radius: 5px; top: 50%; margin-top: -115px;">
        <p style="position: absolute; font-family: Montserrat; top: 3px; right: 15px; color: black; margin: 0px; font-size: 35px;" onclick="document.getElementById('profileDiv').style.display = 'none'">&times;</p>
        <img src="acelogo.png" style="width: 60px; padding: 10px; margin-left: 10px;">
        <p style="font-family: Montserrat; font-weight: 600; color: #e60f0f; position: absolute; top: 0px; left: 100px;">Your Profile</p>
        <p id="details" style="font-family: Montserrat; font-weight: 400; color: black; font-size: 18px; width: 100%; text-align: center;">Your Notifications Are Below.</p>
        <div id="notificationCenter" style="width: 100%; text-align: left; float: left;">

<!--Main Notifications-->
          <div style="display: none; padding: 0px; margin: 0px; margin-top: 10px; margin-left: 5px; margin-right: 5; border: 1px solid #e60f0f; border-radius: 3px; height: 45px;" id="notify1">
        <p style="vertical-align:middle; margin: 0px; padding: 0px; margin-top: 10px; color: #e60f0f; display: inline-block; font-family: Montserrat; font-size: 15px;"><img src="Airplane.png" style="vertical-align:middle; display: inline-block;margin: 0px;  margin-left: 10px; margin-right: 10px; border: 1px solid #e60f0f; border-radius: 5px; width: 18px;">You Booked A Flight!<p onclick="bookNotify()" style="margin: 0px; margin-top: 10px; display: inline-block; float: right; margin-right: 5px; ">üóëÔ∏è</p></p>
          </div>

          <div style="display: none; padding: 0px; margin: 0px; margin-top: 10px; margin-left: 5px; margin-right: 5; border: 1px solid #e60f0f; border-radius: 3px; height: 45px;" id="notify2">
        <p style="vertical-align:middle; margin: 0px; padding: 0px; margin-top: 10px; color: #e60f0f; display: inline-block; font-family: Montserrat; font-size: 15px;"><img src="Airplane.png" style="vertical-align:middle; display: inline-block;margin: 0px;  margin-left: 10px; margin-right: 10px; border: 1px solid #e60f0f; border-radius: 5px; width: 18px;">You Checked into Your Flight<p onclick="checkNotify()" style="margin: 0px; margin-top: 10px; display: inline-block; float: right; margin-right: 5px; ">üóëÔ∏è</p></p>
          </div>
          <!--End of Main Notifications-->
        </div>
      </div>
    </div>

    <!--chat-->
        <div style="position: fixed; top: 30%; right: 0px; border-radius: 25% 0px 0px 25%;  width: 50px; height: 60px; background-color: #e60f0f; box-shadow: 0 0 5px rgba(0, 0, 0, 0.4);" id="chat" onclick="openChat()">
      <center>
      <img src="chat.png" style="width: 30px; margin-right: 2px; margin-top: 20px;">
      </center>
    </div>
    <div id="chatBox" style="animation: grow 0.5s forwards; position: fixed; top: 30%; right: 0px; height: calc(100% - 90px); width: calc(100% - 30px); border-radius: 15px; box-shadow: 0 0 5px rgba(0, 0, 0, 0.4); background-color: white; display: none; flex-direction: column;">
      <p onclick="chat.close()" style="font-family: Montserrat; font-weight: 600; margin: 0px; padding: 15px; background-color: #E60F0F; color: white; border-top-left-radius: 15px; border-top-right-radius: 15px;  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">You are chatting with: <span id="chatter">Ben Lambertson</span></p>
      <div id="chatBoxMain" style="width: 100%; flex-grow: 1; overflow: none; overflow-y: scroll; background-color: #f3f3f3;"></div>
      <input type="text" style="padding: 15px; font-family: montserrat; border: none; border-top: 2px solid #e6e6e6; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;" onkeyup="chatDown(event)" id="chat-input" placeholder="Your message here...">
    </div>
  </body>
<script src="/socket.io/socket.io.js"></script>
<script src="script.js"></script>
<script>

  var socket = io()

    var windowCheck = false;

    var botType = false

    var chat = {
      send: function(username, message, type, chatter) {
        if (botType) {
          console.log('BotType [  Set  ]')
        } else {
          socket.emit('send-message', username, message, type, chatter)
        }
      },
      close: function() {
        document.getElementById('chatBox').style.display = "none";
        document.getElementById('chat').style.display = "block";
      },
      typing: function(username, message, user) {
        if (user === 'bot') {
          botType = true
          var wrapper = document.createElement('div')
          wrapper.style.width = "100%"
          wrapper.style.height = "auto"
          wrapper.style.textAlign = "left"
          wrapper.id = "typing" + document.getElementById('chatBoxMain').childElementCount
          document.getElementById('chatBoxMain').appendChild(wrapper)

          var post = document.createElement('p')
          post.style.padding = "10px"
          post.style.width = "auto"
          post.style.margin = "15px"
          post.style.color = "#1a1a1a"
          post.style.textAlign = "left"
          post.style.display = "inline-block"
          post.style.fontFamily = "Montserrat"
          post.style.backgroundColor = "#FFFFFF"
          post.style.borderRadius = "10px"
          post.textContent = "Ace Bot is typing..."
          if (document.getElementById('chatBoxMain').childElementCount > 3) {

          } else {
            document.getElementById("typing" + (document.getElementById('chatBoxMain').childElementCount - 1).toString()).appendChild(post)
            setTimeout(() => {
              botType = false
              var element = document.getElementById("typing" + (document.getElementById('chatBoxMain').childElementCount - 1).toString())
              element.parentNode.removeChild(element)
              chat.send(username, message, 'message', 'bot')
            }, 2000) 
          }
        } else {
          socket.emit('user-typing', user)
        }
      },
      recieve: function(username, message, type, chatter) {
        if (chatter === 'bot' || chatter === 'professional') {
          var wrapper = document.createElement('div')
          wrapper.style.width = "100%"
          wrapper.style.height = "auto"
          wrapper.style.textAlign = "left"
          wrapper.id = "message" + document.getElementById('chatBoxMain').childElementCount
          document.getElementById('chatBoxMain').appendChild(wrapper)

          var post = document.createElement('p')
          post.style.padding = "10px"
          post.style.width = "auto"
          post.style.margin = "15px"
          post.style.color = "#1a1a1a"
          post.style.textAlign = "left"
          post.style.display = "inline-block"
          post.style.fontFamily = "Montserrat"
          post.style.backgroundColor = "#FFFFFF"
          post.style.borderRadius = "10px"
          post.textContent = message
          document.getElementById("message" + (document.getElementById('chatBoxMain').childElementCount - 1).toString()).appendChild(post)
          document.getElementById('chatBoxMain').scrollTop = document.getElementById('chatBoxMain').scrollHeight
        } else {
          document.getElementById('chat-input').value = ""
          var wrapper = document.createElement('div')
          wrapper.style.width = "100%"
          wrapper.style.height = "auto"
          wrapper.style.textAlign = "right"
          wrapper.id = "message" + document.getElementById('chatBoxMain').childElementCount
          document.getElementById('chatBoxMain').appendChild(wrapper)

          var post = document.createElement('p')
          post.style.padding = "10px"
          post.style.width = "auto"
          post.style.margin = "15px"
          post.style.color = "#1a1a1a"
          post.style.display = "inline-block"
          post.style.textAlign = "right"
          post.style.fontFamily = "Montserrat"
          post.style.backgroundColor = "#e6e6e6"
          post.style.borderRadius = "10px"
          post.textContent = message
          document.getElementById("message" + (document.getElementById('chatBoxMain').childElementCount - 1).toString()).appendChild(post)
          var chatNumber = 1;
          if (document.getElementById('message' + chatNumber).textContent == 'hi') {
            chat.typing(localStorage.getItem('username'), "Hello", 'bot')
            chatNumber + 2;
          }
          else {
            chat.typing(localStorage.getItem('username'), "Thank you for your interest in the Ace App! An Ace Airline representative will be with you shortly.", 'bot')
            chatNumber + 2;
          }
          document.getElementById('chatBoxMain').scrollTop = document.getElementById('chatBoxMain').scrollHeight
        }
      }
    }

    socket.on('recieve-message', (data) => {
      chat.recieve(data.username, data.message, data.type, data.user)
    })

    function openChat() {
      document.getElementById('chatBox').style.display = "flex"
      document.getElementById('chat').style.display = "none"
      document.getElementById('chatter').textContent = "Ace Bot"
      chat.typing(localStorage.getItem('username'), "How can we help you today?", 'bot')
    }

    function chatDown(e){
      
      if (e.keyCode === 13) {
        chat.send(localStorage.getItem('username'), document.getElementById('chat-input').value, 'message', 'user')
      } else {
        chat.typing(localStorage.getItem('username'))
      }
    }

var notification = '0';

  function notifications() {
    document.getElementById('notifyNum').textContent = notification;
    if(notification > 0 ) {
      document.getElementById('details').textContent = 'Your Notifications Are Below.'
    }
    else{
      document.getElementById('details').textContent = 'Your Have No New Notifications.'
    }
  }
  notifications();

  function bookNotify() {
    document.getElementById('notify1').style.display = 'none';
    notification = notification - 1;
    notifications();
  }
  function checkNotify() {
    document.getElementById('notify2').style.display = 'none';
    notification = notification - 1;
    notifications();
  }

  function randomImage() {
    var number = Math.floor(Math.random() * 5);
    document.getElementById('imageElmt').style.backgroundImage = "url('image" + number + ".png')";
  }
  randomImage();
  
  var type = "false"
  var time = 0;
  const animateNav = () => {
    time++
    if (time == 1){
      document.getElementById("unanimate-nav-def").id = "animate-nav";
      document.getElementById('blurid').style.display = 'block';
    } else {
      document.getElementById("unanimate-nav").id = "animate-nav";
      document.getElementById('blurid').style.display = 'block';
    }
  }
  const unanimateNav = () => {
    document.getElementById("animate-nav").id = "unanimate-nav";
    document.getElementById('blurid').style.display = 'none';
  }
  function profile() {
    document.getElementById("profileDiv").style.display = "block"
  }

  function openWeb() {
    console.log('event triggered')
   window.open('https://flyaceairline.weebly.com', '_system');
  }
</script>
</html>